generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model karyawan {
  id_karyawan         Int       @id @default(autoincrement())
  nama_karyawan       String?   @db.VarChar(50)
  email_karyawan      String?   @db.VarChar(50)
  username_karyawan   String?   @db.VarChar(50)
  password_karyawan   String?   @db.VarChar(14)
  no_telepon_karyawan Int?
  tgl_bergabung       DateTime? @db.DateTime(0)
}

model laporan {
  id_laporan      Int       @id @default(autoincrement())
  tgl_laporan     DateTime? @db.DateTime(0)
  total_penjualan Int?
  catatan_laporan String?   @db.VarChar(50)
  status_laporan  String?   @db.VarChar(15)
}

model owner {
  id_owner         Int     @id @default(autoincrement())
  nama_owner       String? @db.VarChar(50)
  email_owner      String? @db.VarChar(50)
  no_telepon_owner Int?
  username_owner   String? @db.VarChar(50)
  password_owner   String? @db.VarChar(14)
}

model pelanggan {
  id_pelanggan         Int          @id @default(autoincrement())
  nama_pelanggan       String?      @db.VarChar(50)
  email_pelanggan      String       @unique(map: "unique_email") @db.VarChar(50)
  no_telepon_pelanggan String?      @db.VarChar(14)
  tier_membership      String?      @db.VarChar(15)
  total_poin           Int?
  notifikasi           notifikasi[]
  membership           membership?  @relation(fields: [tier_membership], references: [tier_membership], onDelete: Restrict, onUpdate: Restrict, map: "fk_mem_tier")
  transaksi            transaksi[]

  @@index([tier_membership], map: "fk_mem_tier")
}

model produk {
  id_produk       Int         @id @default(autoincrement())
  nama_produk     String?     @db.VarChar(100)
  kategori_produk String?     @db.VarChar(50)
  catatan_produk  String?     @db.VarChar(50)
  poin_pertukaran Int?
  harga_satuan    Decimal?    @db.Decimal(12, 0)
  transaksi       transaksi[]
}

model transaksi {
  id_transaksi      Int        @id @default(autoincrement())
  id_pelanggan      Int?
  id_produk         Int?
  total_harga       Decimal?   @db.Decimal(15, 0)
  quantity          Int?
  nama_produk       String?    @db.VarChar(50)
  metode_pembayaran String?    @db.VarChar(50)
  tanggal_transaksi DateTime?  @db.DateTime(0)
  status_pembayaran String?    @db.VarChar(15)
  pelanggan         pelanggan? @relation(fields: [id_pelanggan], references: [id_pelanggan], onDelete: Restrict, onUpdate: Restrict, map: "pelanggan")
  produk            produk?    @relation(fields: [id_produk], references: [id_produk], onDelete: Restrict, onUpdate: Restrict, map: "produk")

  @@index([id_pelanggan], map: "fk_trans_pelanggan")
  @@index([id_produk], map: "fk_trans_produk")
}

model membership {
  tier_membership String      @id @db.VarChar(15)
  required_point  Int?
  diskon          Decimal?    @db.Decimal(5, 2)
  pelanggan       pelanggan[]
}

model notifikasi {
  id_pesan     Int        @id @default(autoincrement())
  id_pelanggan Int?
  pesan        String?    @db.VarChar(100)
  pelanggan    pelanggan? @relation(fields: [id_pelanggan], references: [id_pelanggan], onDelete: Restrict, onUpdate: Restrict, map: "fk_notif_pelanggan")

  @@index([id_pelanggan], map: "fk_notif_pelanggan")
}

model poin {
  id_point        Int     @id @default(autoincrement())
  nama_reward     String? @db.VarChar(50)
  points_required Int?    @map("points required")
  stok            Int?
}

model import_history {
  id       Int       @id @default(autoincrement())
  type     String?   @db.VarChar(50)
  filename String?   @db.VarChar(100)
  count    Int?
  status   String?   @db.VarChar(20)
  createAt DateTime? @db.DateTime(0)
}
